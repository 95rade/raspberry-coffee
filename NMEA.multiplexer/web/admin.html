<!DOCTYPE html>
<html>
  <head>
    <title>NMEA Multiplexer Admin</title>
    <script type="text/javascript" src="js/jquery-2.1.3.js"></script>
    <script type="text/javascript" src="js/restskill.js"></script>
    <link rel="stylesheet" href="css/stylesheet.css" type="text/css"/>
    <style>
      .selectedButton {
        padding:5px;
        border-top-right-radius: 10px;
        border:1px solid #CCC;
        margin-top:10px;
        border-bottom: none;
        font-size: 12px;
        font-weight: bold;
      }
      .unselectedButton {
        padding:5px;
        border-top-right-radius: 10px;
        border:1px solid #CCC;
        margin-top:10px;
        border-bottom: none;
        font-size: 12px;
        font-weight: normal;
      }
      .addbox {
        padding: 1px;
        border-radius: 5px;
        border: 1px solid #CCC;
        width: auto;
        height: auto;
        margin: 80px auto 0px auto;
        overflow: auto;
      }

      th, td {
         border: 1px solid #CCC;
         border-radius: 5px;
         padding: 3px;
      }
    </style>
    <script type="text/javascript">
        var channelSelectManager = function() {
            var x = document.getElementById("channel-select").value;
            manageChannelSelection(x);
        };

        var forwardSelectManager = function() {
            var x = document.getElementById("forwarder-select").value;
            manageForwardSelection(x);
        };

        var computerSelectManager = function() {
            var x = document.getElementById("computer-select").value;
            manageComputerSelection(x);
        };

        var manageChannelSelection = function(selected) {
            switch (selected) {
                case 'serial':
                    $("#channel-serial").css('display', 'inline');
                    $("#channel-tcp").css('display', 'none');
                    $("#channel-file").css('display', 'none');
                    $("#channel-ws").css('display', 'none');
                    $("#channel-rnd").css('display', 'none');
                    $("#channel-bme280").css('display', 'none');
                    $("#channel-htu21df").css('display', 'none');
                    $("#channel-custom").css('display', 'none');
                    break;
                case 'tcp':
                    $("#channel-serial").css('display', 'none');
                    $("#channel-tcp").css('display', 'inline');
                    $("#channel-file").css('display', 'none');
                    $("#channel-ws").css('display', 'none');
                    $("#channel-rnd").css('display', 'none');
                    $("#channel-bme280").css('display', 'none');
                    $("#channel-htu21df").css('display', 'none');
                    $("#channel-custom").css('display', 'none');
                    break;
                case 'file':
                    $("#channel-serial").css('display', 'none');
                    $("#channel-tcp").css('display', 'none');
                    $("#channel-file").css('display', 'inline');
                    $("#channel-ws").css('display', 'none');
                    $("#channel-rnd").css('display', 'none');
                    $("#channel-bme280").css('display', 'none');
                    $("#channel-htu21df").css('display', 'none');
                    $("#channel-custom").css('display', 'none');
                    break;
                case 'ws':
                    $("#channel-serial").css('display', 'none');
                    $("#channel-tcp").css('display', 'none');
                    $("#channel-file").css('display', 'none');
                    $("#channel-ws").css('display', 'inline');
                    $("#channel-rnd").css('display', 'none');
                    $("#channel-bme280").css('display', 'none');
                    $("#channel-htu21df").css('display', 'none');
                    $("#channel-custom").css('display', 'none');
                    break;
                case 'rnd':
                    $("#channel-serial").css('display', 'none');
                    $("#channel-tcp").css('display', 'none');
                    $("#channel-file").css('display', 'none');
                    $("#channel-ws").css('display', 'none');
                    $("#channel-rnd").css('display', 'inline');
                    $("#channel-bme280").css('display', 'none');
                    $("#channel-htu21df").css('display', 'none');
                    $("#channel-custom").css('display', 'none');
                    break;
                case 'bme280':
                    $("#channel-serial").css('display', 'none');
                    $("#channel-tcp").css('display', 'none');
                    $("#channel-file").css('display', 'none');
                    $("#channel-ws").css('display', 'none');
                    $("#channel-rnd").css('display', 'none');
                    $("#channel-bme280").css('display', 'inline');
                    $("#channel-htu21df").css('display', 'none');
                    $("#channel-custom").css('display', 'none');
                    break;
                case 'htu21df':
                    $("#channel-serial").css('display', 'none');
                    $("#channel-tcp").css('display', 'none');
                    $("#channel-file").css('display', 'none');
                    $("#channel-ws").css('display', 'none');
                    $("#channel-rnd").css('display', 'none');
                    $("#channel-bme280").css('display', 'none');
                    $("#channel-htu21df").css('display', 'inline');
                    $("#channel-custom").css('display', 'none');
                    break;
                case 'custom':
                    $("#channel-serial").css('display', 'none');
                    $("#channel-tcp").css('display', 'none');
                    $("#channel-file").css('display', 'none');
                    $("#channel-ws").css('display', 'none');
                    $("#channel-rnd").css('display', 'none');
                    $("#channel-bme280").css('display', 'none');
                    $("#channel-htu21df").css('display', 'none');
                    $("#channel-custom").css('display', 'inline');
                    break;
                default:
                    break;
            }
        };

        var manageForwardSelection = function(selected) {
            switch (selected) {
                case 'serial':
                    $("#forward-serial").css('display', 'inline');
                    $("#forward-tcp").css('display', 'none');
                    $("#forward-gpsd").css('display', 'none');
                    $("#forward-rmi").css('display', 'none');
                    $("#forward-file").css('display', 'none');
                    $("#forward-ws").css('display', 'none');
                    $("#forward-console").css('display', 'none');
                    $("#forward-custom").css('display', 'none');
                    break;
                case 'tcp':
                    $("#forward-serial").css('display', 'none');
                    $("#forward-tcp").css('display', 'inline');
                    $("#forward-gpsd").css('display', 'none');
                    $("#forward-rmi").css('display', 'none');
                    $("#forward-file").css('display', 'none');
                    $("#forward-ws").css('display', 'none');
                    $("#forward-console").css('display', 'none');
                    $("#forward-custom").css('display', 'none');
                    break;
                case 'gpsd':
                    $("#forward-serial").css('display', 'none');
                    $("#forward-tcp").css('display', 'none');
                    $("#forward-gpsd").css('display', 'inline');
                    $("#forward-rmi").css('display', 'none');
                    $("#forward-file").css('display', 'none');
                    $("#forward-ws").css('display', 'none');
                    $("#forward-console").css('display', 'none');
                    $("#forward-custom").css('display', 'none');
                    break;
                case 'rmi':
                    $("#forward-serial").css('display', 'none');
                    $("#forward-tcp").css('display', 'none');
                    $("#forward-gpsd").css('display', 'none');
                    $("#forward-rmi").css('display', 'inline');
                    $("#forward-file").css('display', 'none');
                    $("#forward-ws").css('display', 'none');
                    $("#forward-console").css('display', 'none');
                    $("#forward-custom").css('display', 'none');
                    break;
                case 'file':
                    $("#forward-serial").css('display', 'none');
                    $("#forward-tcp").css('display', 'none');
                    $("#forward-gpsd").css('display', 'none');
                    $("#forward-rmi").css('display', 'none');
                    $("#forward-file").css('display', 'inline');
                    $("#forward-ws").css('display', 'none');
                    $("#forward-console").css('display', 'none');
                    $("#forward-custom").css('display', 'none');
                    break;
                case 'ws':
                    $("#forward-serial").css('display', 'none');
                    $("#forward-tcp").css('display', 'none');
                    $("#forward-gpsd").css('display', 'none');
                    $("#forward-rmi").css('display', 'none');
                    $("#forward-file").css('display', 'none');
                    $("#forward-ws").css('display', 'inline');
                    $("#forward-console").css('display', 'none');
                    $("#forward-custom").css('display', 'none');
                    break;
                case 'console':
                    $("#forward-serial").css('display', 'none');
                    $("#forward-tcp").css('display', 'none');
                    $("#forward-gpsd").css('display', 'none');
                    $("#forward-rmi").css('display', 'none');
                    $("#forward-file").css('display', 'none');
                    $("#forward-ws").css('display', 'none');
                    $("#forward-console").css('display', 'inline');
                    $("#forward-custom").css('display', 'none');
                    break;
                case 'custom':
                    $("#forward-serial").css('display', 'none');
                    $("#forward-tcp").css('display', 'none');
                    $("#forward-gpsd").css('display', 'none');
                    $("#forward-rmi").css('display', 'none');
                    $("#forward-file").css('display', 'none');
                    $("#forward-ws").css('display', 'none');
                    $("#forward-console").css('display', 'none');
                    $("#forward-custom").css('display', 'inline');
                    break;
                default:
                    break;
            }
        };

        var manageComputerSelection = function(selected) {
            switch (selected) {
                case 'tw-current':
                    $("#computer-twc").css('display', 'inline');
                    $("#computer-custom").css('display', 'none');
                    break;
                case 'custom':
                    $("#computer-twc").css('display', 'none');
                    $("#computer-custom").css('display', 'inline');
                    break;
                default:
                    break;
            }
        };

        var requestChannelCreation = function() {
            var x = document.getElementById("channel-select").value;
            switch (x) {
                case 'serial':
                    var portName = $("#serial-port").val();
                    var br = document.getElementById("baud-rate").value;
                    if (portName.trim().length === 0 || br.trim().length === 0) {
                        alert('Both port name and baud rate are required');
                        return;
                    }
                    var dFilters = $("#serial-dev-filters").val().split(",");
                    var sFilters = $("#serial-sentence-filters").val().split(",");
                    createChannel({
                        type: 'serial',
                        port: portName,
                        br: br,
                        deviceFilters: dFilters,
                        sentenceFilters: sFilters
                    });
                    break;
                case 'tcp':
                    var port = $("#tcp-port").val();
                    var server = $("#tcp-server").val();
                    if (port.trim().length === 0 || server.trim().length === 0) {
                        alert('Both port and server name are required');
                        return;
                    }
                    var dFilters = $("#tcp-dev-filters").val().split(",");
                    var sFilters = $("#tcp-sentence-filters").val().split(",");
                    createChannel({
                        type: 'tcp',
                        port: port,
                        hostname: server,
                        deviceFilters: dFilters,
                        sentenceFilters: sFilters
                    });
                    break;
                case 'file':
                    var logfile = $("#data-file").val();
                    if (logfile.trim().length === 0) {
                        alert('Log file name required');
                        return;
                    }
                    var dFilters = $("#data-dev-filters").val().split(",");
                    var sFilters = $("#data-sentence-filters").val().split(",");
                    createChannel({
                        type: 'file',
                        file: logfile,
                        deviceFilters: dFilters,
                        sentenceFilters: sFilters
                    });
                    break;
                case 'ws':
                    var uri = $("#wsuri").val();
                    if (uir.trim().length === 0) {
                        alert('WebSocket URI is required');
                        return;
                    }
                    var dFilters = $("#ws-dev-filters").val().split(",");
                    var sFilters = $("#ws-sentence-filters").val().split(",");
                    createChannel({
                        type: 'ws',
                        wsUri: uri,
                        deviceFilters: dFilters,
                        sentenceFilters: sFilters
                    });
                    break;
                case 'rnd':
                    var dFilters = $("#rnd-dev-filters").val().split(",");
                    var sFilters = $("#rnd-sentence-filters").val().split(",");
                    createChannel({
                        type: 'rnd',
                        deviceFilters: dFilters,
                        sentenceFilters: sFilters
                    });
                    break;
                case 'bme280':
                    var dFilters = $("#bme280-dev-filters").val().split(",");
                    var sFilters = $("#bme280-sentence-filters").val().split(",");
                    var dPrefix = $('#bme280-dev-prefix').val();
                    createChannel({
                        type: 'bme280',
                        devicePrefix: dPrefix,
                        deviceFilters: dFilters,
                        sentenceFilters: sFilters
                    });
                    break;
                case 'htu21df':
                    var dFilters = $("#htu21df-dev-filters").val().split(",");
                    var sFilters = $("#htu21df-sentence-filters").val().split(",");
                    var dPrefix = $('#htu21df-dev-prefix').val();
                    createChannel({
                        type: 'htu21df',
                        devicePrefix: dPrefix,
                        deviceFilters: dFilters,
                        sentenceFilters: sFilters
                    });
                    break;
                case 'custom':
                    var clientClass = $("#ch-custom-class").val();
                    var readerClass = $("#ch-custom-reader").val();
                    var propfile = $('#ch-custom-prop-file').val();
                    createChannel({
                        type: 'custom',
                        clientClass: clientClass,
                        readerClass: readerClass,
                        propFile: propfile
                    });
                    break;
                default:
                    break;
            }
        };

        var requestForwardCreation = function() {
            var x = document.getElementById("forwarder-select").value;
            switch (x) {
                case 'serial':
                    var portName = $("#serial-port-fwd").val();
                    var br = document.getElementById("baud-rate-fwd").value;
                    if (portName.trim().length === 0 || br.trim().length === 0) {
                        alert('Both port name and baud rate are required');
                        return;
                    }
                    createForwarder({
                        type: 'serial',
                        port: portName,
                        br: br
                    });
                    break;
                case 'tcp':
                    var port = $("#fwd-tcp-port").val();
                    if (port.trim().length === 0) {
                        alert('Port is required');
                        return;
                    }
                    createForwarder({
                        type: 'tcp',
                        port: port
                    });
                    break;
                case 'gpsd':
                    var port = $("#fwd-gpsd-port").val();
                    if (port.trim().length === 0) {
                        alert('Port is required');
                        return;
                    }
                    createForwarder({
                        type: 'gpsd',
                        port: port
                    });
                    break;
                case 'rmi':
                    var port = $("#fwd-rmi-port").val();
                    if (port.trim().length === 0) {
                        alert('Port is required');
                        return;
                    }
                    var name = $("#fwd-rmi-binding-name").val();
                    if (name.trim().length === 0) {
                        alert('Name is required');
                        return;
                    }
                    createForwarder({
                        type: 'rmi',
                        port: port,
                        bindingName: name
                    });
                    break;
                case 'file':
                    var logfile = $("#fwd-data-file").val();
                    if (logfile.trim().length === 0) {
                        alert('Log file name is required');
                        return;
                    }
                    createForwarder({
                        type: 'file',
                        log: logfile
                    });
                    break;
                case 'ws':
                    var uri = $("#fwd-wsuri").val();
                    if (uri.trim().length === 0) {
                        alert('WebSocket URI is required');
                        return;
                    }
                    createForwarder({
                        type: 'ws',
                        wsUri: uri
                    });
                    break;
                case 'console':
                    createForwarder({
                        type: 'console'
                    });
                    break;
                case 'custom':
                    var forwarderClass = $("#fwd-custom-class").val();
                    var propfile = $('#fwd-custom-prop-file').val();
                    createForwarder({
                        type: 'custom',
                        forwarderClass: forwarderClass,
                        propFile: propfile
                    });
                    break;
                default:
                    break;
            }
        };

        var requestComputerCreation = function() {
            var x = document.getElementById("computer-select").value;
            switch (x) {
                case 'tw-current':
                    var prefix = $("#cptr-twc-prefix").val();
                    var tbl = $("#cptr-twc-tbl").val();
                    if (prefix.trim().length === 0 || tbl.trim().length === 0) {
                        alert('Prefix and TimeBuffer length are required');
                        return;
                    }
                    createComputer({
                        type: 'tw-current',
                        prefix: prefix,
                        timeBufferLength: tbl
                    });
                    break;
                case 'custom':
                    var computerClass = $("#cptr-custom-class").val();
                    var propfile = $('#cptr-custom-prop-file').val();
                    createComputer({
                        type: 'custom',
                        computerClass: computerClass,
                        propFile: propfile
                    });
                    break;
                default:
                    break;
            }
        };

        var manageClick = function(div) {
            document.getElementById('showPorts').className = (div.id === 'showPorts' ? 'selectedButton' : 'unselectedButton');
            document.getElementById('showChannels').className = (div.id === 'showChannels' ? 'selectedButton' : 'unselectedButton');
            document.getElementById('showForwarders').className = (div.id === 'showForwarders' ? 'selectedButton' : 'unselectedButton');
            document.getElementById('showComputers').className = (div.id === 'showComputers' ? 'selectedButton' : 'unselectedButton');
            switch (div.id) {
                case 'showPorts':
                    serialPortList();
                    break;
                case 'showChannels':
                    channelList();
                    break;
                case 'showForwarders':
                    forwarderList();
                    break;
                case 'showComputers':
                    computerList();
                    break;
                default:
                    break;
            }
        };
    </script>
  </head>
  <body>
    <h2>NMEA Multiplexer Admin</h2>
    <small>JQuery, Ajax, REST, JSON..., Multiplexer Admin.</small>
    <p>
    <div style="margin-bottom: 0px;">
      <span id="showPorts"  onclick="manageClick(this);"  class="selectedButton" style="margin-left: 5px; cursor: pointer;">Fetch Serial Ports list <img src="refresh_icon.png" width="10" height="12"/></span>
      <span id="showChannels" onclick="manageClick(this);" class="unselectedButton" style="cursor: pointer;">Fetch Channels list <img src="refresh_icon.png" width="10" height="12"/></span>
      <span id="showForwarders" onclick="manageClick(this);" class="unselectedButton" style="cursor: pointer;">Fetch Forwarders list <img src="refresh_icon.png" width="10" height="12"/></span>
      <span id="showComputers" onclick="manageClick(this);" class="unselectedButton" style="cursor: pointer;">Fetch Computers list <img src="refresh_icon.png" width="10" height="12"/></span>
      <button onclick="resetCache();" style="margin-bottom: 3px;">Reset Cache</button>
      <input type='checkbox' onchange='manageMuxVerbose(this);'> Multiplexer verbose
    </div>
    <div id="lists" style="padding: 1px; border-radius: 5px; border: 1px solid #CCC; min-height: 50px; max-height: 200px; overflow-y: scroll;"></div>
    </p>
    <p>
      <button onclick="showAddChannel();">Add a Channel</button>&nbsp;
      <button onclick="showAddForwarder();">Add a Forwarder</button>&nbsp;
      <button onclick="showAddComputer();">Add a Computer</button>
      <div id="add-channel" style="display: none;">
        <hr/>
        <h4>Add an input Channel</h4>
        <table style="padding: 5px; border-radius: 5px; border: 1px solid #CCC; margin-bottom: 5px;">
          <tr>
            <td valign="top">
              <select id="channel-select" onchange="channelSelectManager();">
                <option value="serial">Serial</option>
                <option value="tcp">TCP</option>
                <option value="file">Data File</option>
                <option value="ws">Web Socket</option>
                <option value="rnd">Random</option>
                <option value="bme280">BME280</option>
                <option value="htu21df">HTU21DF</option>
                <option value="custom">Custom</option>
              </select>
            </td>
            <td valign="top">
              <div id="channel-serial" style="display: inline;">
                <table>
                  <tr>
                    <td>Port</td>
                    <td><input id="serial-port" type="text" placeholder="Serial Port Name" size="30"></td>
                  </tr>
                  <tr>
                    <td>Baud Rate</td>
                    <td>
                      <select id="baud-rate">
                        <option value="1200">1200</option>
                        <option value="2400">2400</option>
                        <option value="4800">4800</option>
                        <option value="9600">9600</option>
                        <option value="19200">19200</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td>Device filter(s)</td>
                    <td><input id="serial-dev-filters" type="text" placeholder="Device filters, II, ~GP" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                  <tr>
                    <td>Sentence filter(s)</td>
                    <td><input id="serial-sentence-filters" type="text" placeholder="Sentence filters, GLL, ~RMC" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                </table>
              </div>
              <div id="channel-tcp" style="display: none;">
                <table>
                  <tr>
                    <td>Server</td>
                    <td><input id="tcp-server" type="text" placeholder="Server Name" size="20"></td>
                  </tr>
                  <tr>
                    <td>Port</td>
                    <td><input id="tcp-port" type="text" placeholder="Port" size="10"></td>
                  </tr>
                  <tr>
                    <td>Device filter(s)</td>
                    <td><input id="tcp-dev-filters" type="text" placeholder="Device filters, II, ~GP" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                  <tr>
                    <td>Sentence filter(s)</td>
                    <td><input id="tcp-sentence-filters" type="text" placeholder="Sentence filters, GLL, ~RMC" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                </table>
              </div>
              <div id="channel-file" style="display: none;">
                <table>
                  <tr>
                    <td>Data File</td>
                    <td><input id="data-file" type="text" placeholder="Log File" size="30"></td>
                  </tr>
                  <tr>
                    <td>Device filter(s)</td>
                    <td><input id="data-dev-filters" type="text" placeholder="Device filters, II, ~GP" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                  <tr>
                    <td>Sentence filter(s)</td>
                    <td><input id="data-sentence-filters" type="text" placeholder="Sentence filters, GLL, ~RMC" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                </table>
              </div>
              <div id="channel-ws" style="display: none;">
                <table>
                  <tr>
                    <td>WebSocket URI</td>
                    <td><input id="wsuri" type="text" placeholder="ws://machine-name:9876/" size="30"></td>
                  </tr>
                  <tr>
                    <td>Device filter(s)</td>
                    <td><input id="ws-dev-filters" type="text" placeholder="Device filters, II, ~GP" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                  <tr>
                    <td>Sentence filter(s)</td>
                    <td><input id="ws-sentence-filters" type="text" placeholder="Sentence filters, GLL, ~RMC" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                </table>
              </div>
              <div id="channel-rnd" style="display: none;">
                <table>
                  <tr>
                    <td>Device filter(s)</td>
                    <td><input id="rnd-dev-filters" type="text" placeholder="Device filters, II, ~GP" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                  <tr>
                    <td>Sentence filter(s)</td>
                    <td><input id="rnd-sentence-filters" type="text" placeholder="Sentence filters, GLL, ~RMC" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                </table>
              </div>
              <div id="channel-bme280" style="display: none;">
                <table>
                  <tr>
                    <td>Device Prefix</td>
                    <td><input id="bme280-dev-prefix" type="text" placeholder="Device Prefix" size="10" value="RP"></td>
                  </tr>
                  <tr>
                    <td>Device filter(s)</td>
                    <td><input id="bme280-dev-filters" type="text" placeholder="Device filters, II, ~GP" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                  <tr>
                    <td>Sentence filter(s)</td>
                    <td><input id="bme280-sentence-filters" type="text" placeholder="Sentence filters, GLL, ~RMC" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                </table>
              </div>
              <div id="channel-htu21df" style="display: none;">
                <table>
                  <tr>
                    <td>Device Prefix</td>
                    <td><input id="htu21df-dev-prefix" type="text" placeholder="Device Prefix" size="10" value="RP"></td>
                  </tr>
                  <tr>
                    <td>Device filter(s)</td>
                    <td><input id="htu21df-dev-filters" type="text" placeholder="Device filters, II, ~GP" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                  <tr>
                    <td>Sentence filter(s)</td>
                    <td><input id="htu21df-sentence-filters" type="text" placeholder="Sentence filters, GLL, ~RMC" size="30"></td>
                    <td><small>Negate with <b>~</b></small></td>
                  </tr>
                </table>
              </div>
              <div id="channel-custom" style="display: none;">
                <table>
                  <tr>
                    <td>Client Class</td>
                    <td><input id="ch-custom-class" type="text" placeholder="Client Class" size="30"></td>
                  </tr>
                  <tr>
                    <td>Reader Class</td>
                    <td><input id="ch-custom-reader" type="text" placeholder="Reader Class" size="30"></td>
                  </tr>
                  <tr>
                    <td>Properties file</td>
                    <td><input id="ch-custom-prop-file" type="text" placeholder="Properties file name" size="30"></td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>
        </table>
        <button onclick="requestChannelCreation();">Add</button>
      </div>
      <div id="add-forwarder" style="display: none;">
        <hr/>
        <h4>Add a forwarder</h4>
        <table style="padding: 5px; border-radius: 5px; border: 1px solid #CCC; margin-bottom: 5px;">
          <tr>
            <td valign="top">
              <select id="forwarder-select" onchange="forwardSelectManager();">
                <option value="serial">Serial</option>
                <option value="tcp">TCP</option>
                <option value="gpsd">GPSd</option>
                <option value="rmi">RMI</option>
                <option value="file">Data File</option>
                <option value="ws">Web Socket</option>
                <option value="console">Console</option>
                <option value="custom">Custom</option>
              </select>
            </td>
            <td valign="top">
              <div id="forward-serial" style="display: inline;">
                <table>
                  <tr>
                    <td>Port</td>
                    <td><input id="serial-port-fwd" type="text" placeholder="Serial Port Name" size="30"></td>
                  </tr>
                  <tr>
                    <td>Baud Rate</td>
                    <td>
                      <select id="baud-rate-fwd">
                        <option value="1200">1200</option>
                        <option value="2400">2400</option>
                        <option value="4800">4800</option>
                        <option value="9600">9600</option>
                        <option value="19200">19200</option>
                      </select>
                    </td>
                  </tr>
                </table>
              </div>
              <div id="forward-tcp" style="display: none;">
                <table>
                  <tr>
                    <td>Port</td>
                    <td><input id="fwd-tcp-port" type="text" placeholder="Port" size="10"></td>
                  </tr>
                </table>
              </div>
              <div id="forward-gpsd" style="display: none;">
                <table>
                  <tr>
                    <td>Port</td>
                    <td><input id="fwd-gpsd-port" type="text" placeholder="Port, like 2947" size="10"></td>
                  </tr>
                </table>
              </div>
              <div id="forward-rmi" style="display: none;">
                <table>
                  <tr>
                    <td>Port</td>
                    <td><input id="fwd-rmi-port" type="text" placeholder="Port" size="10"></td>
                  </tr>
                  <tr>
                    <td>Binding Name</td>
                    <td><input id="fwd-rmi-binding-name" type="text" placeholder="Binding Name" size="20"></td>
                  </tr>
                </table>
              </div>
              <div id="forward-file" style="display: none;">
                <table>
                  <tr>
                    <td>Data File</td>
                    <td><input id="fwd-data-file" type="text" placeholder="Log File" size="30"></td>
                  </tr>
                </table>
              </div>
              <div id="forward-ws" style="display: none;">
                <table>
                  <tr>
                    <td>WebSocket URI</td>
                    <td><input id="fwd-wsuri" type="text" placeholder="ws://machine-name:9876/" size="30"></td>
                  </tr>
                </table>
              </div>
              <div id="forward-console" style="display: none;">
                <i>No Parameters</i>
              </div>
              <div id="forward-custom" style="display: none;">
                <table>
                  <tr>
                    <td>Forwarder Class</td>
                    <td><input id="fwd-custom-class" type="text" placeholder="Forwarder Class" size="30"></td>
                  </tr>
                  <tr>
                    <td>Properties file</td>
                    <td><input id="fwd-custom-prop-file" type="text" placeholder="Properties file name" size="30"></td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>
        </table>
        <button onclick="requestForwardCreation();">Add</button>
      </div>
      <div id="add-computer" style="display: none;">
        <hr/>
        <h4>Add a computer</h4>
        <table style="padding: 5px; border-radius: 5px; border: 1px solid #CCC; margin-bottom: 5px;">
          <tr>
            <td valign="top">
              <select id="computer-select" onchange="computerSelectManager();">
                <option value="tw-current">True Wind and Current</option>
                <option value="custom">Custom</option>
              </select>
            </td>
            <td valign="top">
              <div id="computer-twc" style="display: inline;">
                <table>
                  <tr>
                    <td>Prefix</td>
                    <td><input id="cptr-twc-prefix" type="text" placeholder="OS" size="5"></td>
                  </tr>
                  <tr>
                    <td>Time Buffer Length</td>
                    <td><input id="cptr-twc-tbl" type="text" placeholder="60, 120, 300" size="30"> in seconds.</td>
                  </tr>
                </table>
              </div>
              <div id="computer-custom" style="display: none;">
                <table>
                  <tr>
                    <td>Computer Class</td>
                    <td><input id="cptr-custom-class" type="text" placeholder="Computer Class" size="30"></td>
                  </tr>
                  <tr>
                    <td>Properties file</td>
                    <td><input id="cptr-custom-prop-file" type="text" placeholder="Properties file name" size="30"></td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>
        </table>
        <button onclick="requestComputerCreation();">Add</button>
    </div>
    </p>
    <hr/>
    <address>Oliv fecit, AD 2016.</address>
  </body>
</html>