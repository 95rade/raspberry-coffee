plugins {
  id "com.eriwen.gradle.js" version "2.14.1"
}

group = 'oliv.pi4j.samples'
version = '1.0'

javascript.source {
  dev {
    js {
      srcDir "out/oliv-components/widgets"
      include "*.js"
      exclude "*.min.js"
      exclude "*.map"
    }
  }
  prod {
    js {
      srcDir "oliv-components/widgets"
      include "*.min.js"
    }
  }
}


repositories {
  mavenCentral()
  mavenLocal()
}

minifyJs {
  source = "out/oliv-components/widgets"
  dest = file("oliv-components/minified/all-min.js")
  sourceMap = file("oliv-components/minified/all.sourcemap.json")
  closure {
    warningLevel = 'QUIET'
    compilerOptions.languageIn = "ECMASCRIPT6"
    compilerOptions.languageOut = "ECMASCRIPT5"
  }
}

//jsdoc {
//  source = "oliv-components/widgets/*.js"
//  destinationDir = file("./jsdoc")
//}

task jsDoc(type: com.eriwen.gradle.js.tasks.JsDocTask){
    source = "oliv-components/widgets"
    destinationDir = file("${buildDir}/jsdoc")
    closure {
        warningLevel = 'QUIET'
        compilerOptions.languageIn = "ECMASCRIPT6"
        compilerOptions.languageOut = "ECMASCRIPT5"
    }
}
