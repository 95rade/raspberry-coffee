group 'weather.pi'
version '0.0.1'

apply plugin: 'groovy'
apply plugin: 'java'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.3.11'
    testCompile group: 'junit', name: 'junit', version: '4.11'
    compile 'io.swagger:swagger-codegen-cli:2.2.0'
    compile 'org.ajoberstar:gradle-git:1.1.0'
}

task swaggerNode(type: JavaExec, description: "Generate nodejs server code for the weather station") {
    classpath = configurations.runtime
    main = 'io.swagger.codegen.SwaggerCodegen'
    args "generate",
            "-l", "nodejs-server",
            "-i", "sensors.yaml",
            "-o", "./generated/node"
}

task swaggerClj(type: JavaExec, description: "Generate Clojure server code for the weather station") {
    classpath = configurations.runtime
    main = 'io.swagger.codegen.SwaggerCodegen'
    args "generate",
            "-l", "clojure",
            "-i", "sensors.yaml",
            "-o", "./generated/clj"
}

task swaggerJaxRS(type: JavaExec, description: "Generate JAX-RS server code for the weather station") {
    classpath = configurations.runtime
    main = 'io.swagger.codegen.SwaggerCodegen'
    args "generate",
            "-l", "jaxrs",
            "-i", "sensors.yaml",
            "-o", "./generated/jaxrs"
}

task swaggerGO(type: JavaExec, description: "Generate GO server code for the weather station") {
    classpath = configurations.runtime
    main = 'io.swagger.codegen.SwaggerCodegen'
    args "generate",
            "-l", "go-server",
            "-i", "sensors.yaml",
            "-o", "./generated/go"
}

task swaggerScala(type: JavaExec, description: "Generate GO server code for the weather station") {
    classpath = configurations.runtime
    main = 'io.swagger.codegen.SwaggerCodegen'
    args "generate",
            "-l", "scalatra",
            "-i", "sensors.yaml",
            "-o", "./generated/scala"
}
