{"version":3,"sources":["webpack://boat-overview/webpack/universalModuleDefinition","webpack://boat-overview/webpack/bootstrap","webpack://boat-overview/../utilities/Utilities.js","webpack://boat-overview/./BoatOverview.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","toRadians","deg","Math","PI","toDegrees","rad","boatOverviewDefaultColorConfig","displayBackgroundGradient","from","to","gridColor","twArrowColor","bspArrowColor","cmgArrowColor","awArrowColor","gpsWsArrowColor","vmgArrowColor","dDWArrowColor","currentArrowColor","boatFillColor","boatOutlineColor","nmeaDataDisplayColor","calculatedDataDisplayColor","vmgDataDisplayColor","dDWDataDisplayColor","BoatOverview","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","_shadowRoot","attachShadow","canvas","document","createElement","fallbackElemt","content","createTextNode","appendChild","shadowRoot","_width","_height","_bsp","_hdg","_aws","_awa","_tws","_twa","_twd","_vmg","_cog","_sog","_cdr","_csp","_lwy","_cmg","_b2wp","_Decl","_dev","_zoom","_withCurrent","_withLabels","_withGPS","_withWind","_withTrueWind","_withVMG","_vmgOnWind","_withW","_boatShape","_wpName","_previousClassName","boatOverviewColorConfig","speedScale","WL_RATIO_COEFF","BOAT_LENGTH","HTMLElement","repaint","attrName","oldVal","newVal","parseInt","parseFloat","console","log","classNames","colorConfig","classes","split","cls","length","cssClassName","styleSheets","cssRules","selector","selectorText","undefined","indexOf","style","cssText","forEach","elem","trim","keyValPair","err","drawBoatOverview","cw","ch","x","min","y","context","cWidth","cHeight","Utilities","beginPath","center","getCanvasCenter","windLength","dX","sin","dY","cos","line","Line","strokeStyle","fillStyle","lineWidth","drawWithAnemoArrowheads","closePath","font","fillText","toFixed","wd","_awd","bspLength","drawHollowArrow","drawWithArrowhead","magNorth","compassNorth","_magNorth","_compassNorth","vmgOnWind","len","_dX","_dY","save","restore","setLineDash","moveTo","sogLength","lineTo","stroke","dXcmg","dYcmg","dXcog","dYcog","awLength","dXaw","dYaw","twLength","dXtw","dYtw","trueHeading","boatLength","push","xPoints","yPoints","ptX","ptY","dx","dy","round","fill","currentStyle","className","getColorConfig","getContext","width","height","grd","createLinearGradient","addColorStop","fillRect","maxSpeed","max","ceil","circ","radius","arc","drawBoat","drawTrueWind","drawVW","drawAppWind","drawBSP","drawNorths","drawCMG","drawSOG","drawCurrent","drawVMG","txtY","mess","hdm","hdc","val","setAttribute","Point","x1","y1","x2","y2","HEAD_LENGTH","HEAD_WIDTH","angle","ctx","drawWithArrowheads","both","startRadians","atan","drawArrowhead","endRadians","one","two","three","four","five","six","seven","eight","dir","sqrt","headWidth","arrowWidth","rotate","radians","translate","customElements"],"mappings":"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","file":"boat-overview.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"boat-overview\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"boat-overview\"] = factory();\n\telse\n\t\troot[\"boat-overview\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n *\n * Misc utilities used all over the place.\n */\nexport function lpad(str, len, pad) {\n\tlet s = str;\n\twhile (s.length < len) {\n\t\ts = (pad === undefined ? ' ' : pad) + s;\n\t}\n\treturn s;\n}\n\nexport function rpad(str, len, pad) {\n\tlet s = str;\n\twhile (s.length < len) {\n\t\ts += (pad === undefined ? ' ' : pad);\n\t}\n\treturn s;\n}\n\nexport function toRadians(deg) {\n\treturn deg * (Math.PI / 180);\n}\n\nexport function toDegrees(rad) {\n\treturn rad * (180 / Math.PI);\n}\n\n/**\n *\n * @param start { lat: xx, lng: xx }, L & G in Degrees\n * @param dist distance in nm\n * @param bearing route in Degrees\n * @return DR Position, L & G in Degrees\n */\nexport function deadReckoning(start, dist, bearing) {\n\tlet radianDistance = toRadians(dist / 60);\n\tlet finalLat = (Math.asin((Math.sin(toRadians(start.lat)) * Math.cos(radianDistance)) +\n\t\t\t(Math.cos(toRadians(start.lat)) * Math.sin(radianDistance) * Math.cos(toRadians(bearing)))));\n\tlet finalLng = toRadians(start.lng) + Math.atan2(Math.sin(toRadians(bearing)) * Math.sin(radianDistance) * Math.cos(toRadians(start.lat)),\n\t\t\tMath.cos(radianDistance) - Math.sin(toRadians(start.lat)) * Math.sin(finalLat));\n\tfinalLat = toDegrees(finalLat);\n\tfinalLng = toDegrees(finalLng);\n\n\treturn {lat: finalLat, lng: finalLng};\n}\n\nconst TO_NORTH = 0;\nconst TO_SOUTH = 1;\nconst TO_EAST = 2;\nconst TO_WEST = 3;\n\n/**\n * All in Radians\n *\n * @param start\n * @param arrival\n * @param nbPoints\n * @returns {Array}\n */\nexport function calculateGreatCircle(start, arrival, nbPoints) {\n\tvar ewDir;\n\tvar nsDir;\n\n\tif (arrival.lat > start.lat) {\n\t\tnsDir = TO_NORTH;\n\t} else {\n\t\tnsDir = TO_SOUTH;\n\t}\n\tif (arrival.lng > start.lng) {\n\t\tewDir = TO_EAST;\n\t} else {\n\t\tewDir = TO_WEST;\n\t}\n\tif (Math.abs(arrival.lng - start.lng) > Math.PI) {\n\t\tif (ewDir == TO_EAST) {\n\t\t\tewDir = TO_WEST;\n\t\t\tarrival.lng = (arrival.lng - (2 * Math.PI));\n\t\t} else {\n\t\t\tewDir = TO_EAST;\n\t\t\tarrival.lng = ((2 * Math.PI) + arrival.lng);\n\t\t}\n\t}\n\tlet deltaG = arrival.lng - start.lng;\n\tlet route = [];\n\tlet interval = deltaG / nbPoints;\n\tlet smallStart = { lat: start.lat, lng: start.lng };\n\n\tfor (let g = start.lng; route.length <= nbPoints; g += interval) {\n\t\tlet deltag = arrival.lng - g;\n\t\tlet tanStartAngle = Math.sin(deltag) / (Math.cos(smallStart.lat) * Math.tan(arrival.lat) - Math.sin(smallStart.lat) * Math.cos(deltag));\n\t\tlet smallL = Math.atan(Math.tan(smallStart.lat) * Math.cos(interval) + Math.sin(interval) / (tanStartAngle * Math.cos(smallStart.lat)));\n\t\tlet rpG = g + interval;\n\t\tif (rpG > Math.PI) {\n\t\t\trpG -= (2 * Math.PI);\n\t\t}\n\t\tif (rpG < -Math.PI) {\n\t\t\trpG = (2 * Math.PI) + rpG;\n\t\t}\n\t\tlet routePoint = { lat: smallL, lng: rpG };\n\t\tlet ari = toDegrees(Math.atan(tanStartAngle));\n\t\tif (ari < 0.0) {\n\t\t\tari = Math.abs(ari);\n\t\t}\n\t\tvar _nsDir;\n\t\tif (routePoint.lat > smallStart.lat) {\n\t\t\t_nsDir = TO_NORTH;\n\t\t} else {\n\t\t\t_nsDir = TO_SOUTH;\n\t\t}\n\t\tlet arrG = routePoint.lng;\n\t\tlet staG = smallStart.lng;\n\t\tif (Math.sign(arrG) != Math.sign(staG)) {\n\t\t\tif (Math.sign(arrG) > 0) {\n\t\t\t\tarrG -= (2 * Math.PI);\n\t\t\t} else {\n\t\t\t\tarrG = Math.PI - arrG;\n\t\t\t}\n\t\t}\n\t\tvar _ewDir;\n\t\tif (arrG > staG) {\n\t\t\t_ewDir = TO_EAST;\n\t\t} else {\n\t\t\t_ewDir = TO_WEST;\n\t\t}\n\t\tlet _start = 0.0;\n\t\tif (_nsDir == TO_SOUTH) {\n\t\t\t_start = 180;\n\t\t\tif (_ewDir == TO_EAST) {\n\t\t\t\tari = _start - ari;\n\t\t\t} else {\n\t\t\t\tari = _start + ari;\n\t\t\t}\n\t\t} else {\n\t\t\tif (_ewDir == TO_EAST) {\n\t\t\t\tari = _start + ari;\n\t\t\t} else {\n\t\t\t\tari = _start - ari;\n\t\t\t}\n\t\t}\n\t\twhile (ari < 0.0) {\n\t\t\tari += 360;\n\t\t}\n\t\troute.push({ pos: smallStart, z: (arrival === smallStart) ? null : ari });\n\t\tsmallStart = routePoint;\n\t}\n\treturn route;\n}\n\nexport function calculateGreatCircleInDegrees(start, arrival, nbPoints) {\n\tlet radRoute = calculateGreatCircle(\n\t\t\t{ lat: toRadians(start.lat), lng: toRadians(start.lng) },\n\t\t\t{ lat: toRadians(arrival.lat), lng: toRadians(arrival.lng) },\n\t\t\tnbPoints);\n\tlet degRoute = [];\n\tradRoute.forEach(pt => {\n\t\tdegRoute.push({ pos: { lat: toDegrees(pt.pos.lat), lng: toDegrees(pt.pos.lng) }, z: pt.z });\n\t});\n\treturn degRoute;\n}\n\nexport function decToSex(val, ns_ew) {\n\tlet absVal = Math.abs(val);\n\tlet intValue = Math.floor(absVal);\n\tlet dec = absVal - intValue;\n\tlet i = intValue;\n\tdec *= 60;\n//    let s = i + \"°\" + dec.toFixed(2) + \"'\";\n//    let s = i + String.fromCharCode(176) + dec.toFixed(2) + \"'\";\n\tlet s = \"\";\n\tif (ns_ew !== undefined) {\n\t\tif (val < 0) {\n\t\t\ts += (ns_ew === 'NS' ? 'S' : 'W');\n\t\t} else {\n\t\t\ts += (ns_ew === 'NS' ? 'N' : 'E');\n\t\t}\n\t\ts += \" \";\n\t} else {\n\t\tif (val < 0) {\n\t\t\ts += '-'\n\t\t}\n\t}\n\ts += i + \"°\" + dec.toFixed(2) + \"'\";\n\n\treturn s;\n}\n\nexport function getDir(x, y) {\n\tlet dir = 0.0;\n\tif (y != 0) {\n\t\tdir = toDegrees(Math.atan(x / y));\n\t}\n\tif (x <= 0 || y <= 0) {\n\t\tif (x > 0 && y < 0) {\n\t\t\tdir += 180;\n\t\t} else if (x < 0 && y > 0) {\n\t\t\tdir += 360;\n\t\t} else if (x < 0 && y < 0) {\n\t\t\tdir += 180;\n\t\t} else if (x == 0) {\n\t\t\tif (y > 0) {\n\t\t\t\tdir = 0.0;\n\t\t\t} else {\n\t\t\t\tdir = 180;\n\t\t\t}\n\t\t} else if (y == 0) {\n\t\t\tif (x > 0) {\n\t\t\t\tdir = 90;\n\t\t\t} else {\n\t\t\t\tdir = 270;\n\t\t\t}\n\t\t}\n\t}\n\tdir += 180;\n\twhile (dir >= 360) {\n\t\tdir -= 360;\n\t}\n\treturn dir;\n}\n","/*\n * HTML Color names: https://www.w3schools.com/colors/colors_names.asp\n *\n * Attributes:\n * Values: width, height, BSP, HDG, AWS, AWA, TWS, TWA, TWD, CDR, CSP, Leeway, CMG, VMG, B2WP, Decl, dev\n * Booleans: displayCurrent, displayLabels, displayVMG, vmgOnWind or vmgOnWP, with D, d, W\n * Options: BoatShape (mono, cata, tri, plane), WPName\n *\n * Designed to represent the data coming from the NavServer.\n * NOTE: The consistency of the data is not maintained by the Component!!\n * Example:\n{\n  \"Damping\": 30,\n  \"HDG Offset\": 0,\n  \"To Waypoint\": \"RANGI   \",\n  \"CDR\": {\n    \"angle\": 115.39230004857473\n  },\n  \"Daily\": {\n    \"distance\": 12.2\n  },\n  \"Max Leeway\": 10,\n  \"VMG on Wind\": -3.8584310339481522,\n  \"HDG c.\": {\n    \"angle\": 213\n  },\n  \"CMG\": {\n    \"angle\": 222.01692220976113\n  },\n  \"BSP\": {\n    \"speed\": 7.1\n  },\n  \"TWA\": {\n    \"angle\": -130.38922223613739\n  },\n  \"TWD\": {\n    \"angle\": 91\n  },\n  \"Current calculated with damping\": {\n    \"30000\": {\n      \"bufferLength\": 30000,\n      \"speed\": {\n        \"speed\": 0.32396646536173773\n      },\n      \"direction\": {\n        \"angle\": 48.891255868064114\n      },\n      \"nbPoints\": 11,\n      \"oldest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"latest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"len\": 30000\n    },\n    \"60000\": {\n      \"bufferLength\": 60000,\n      \"speed\": {\n        \"speed\": 0.32396646536173773\n      },\n      \"direction\": {\n        \"angle\": 48.891255868064114\n      },\n      \"nbPoints\": 11,\n      \"oldest\": \"Sun, 2010 Nov 21 22:07:14 UTC\",\n      \"latest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"len\": 30000\n    },\n    \"600000\": {\n      \"bufferLength\": 600000,\n      \"speed\": {\n        \"speed\": 0.32396646536173773\n      },\n      \"direction\": {\n        \"angle\": 48.891255868064114\n      },\n      \"nbPoints\": 11,\n      \"oldest\": \"Sun, 2010 Nov 21 22:07:14 UTC\",\n      \"latest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"len\": 30000\n    }\n  },\n  \"Position\": {\n    \"lat\": -9.108366666666667,\n    \"lng\": -140.20933333333332\n  },\n  \"Log\": {\n    \"distance\": 3013\n  },\n  \"Solar Time\": {\n    \"date\": \"Nov 21, 2010, 4:46:56 AM\",\n    \"fmtDate\": {\n      \"epoch\": 0,\n      \"year\": 0,\n      \"month\": 0,\n      \"day\": 0,\n      \"hour\": 12,\n      \"min\": 46,\n      \"sec\": 56\n    }\n  },\n  \"BSP Factor\": 1,\n  \"Set and Drift\": {\n    \"speed\": 0.32,\n    \"angle\": 49\n  },\n  \"From Waypoint\": \"\",\n  \"TWS\": {\n    \"speed\": 18.5\n  },\n  \"GPS Time\": {\n    \"date\": \"Nov 21, 2010, 2:07:47 PM\",\n    \"fmtDate\": {\n      \"epoch\": 0,\n      \"year\": 0,\n      \"month\": 0,\n      \"day\": 0,\n      \"hour\": 22,\n      \"min\": 7,\n      \"sec\": 47\n    }\n  },\n  \"Distance to WP\": {\n    \"distance\": 561.7\n  },\n  \"AWS Factor\": 1,\n  \"Water Temperature\": {\n    \"temperature\": 26.5\n  },\n  \"Small Distance\": 0.06425312432932662,\n  \"NMEA\": \"$CCVDR,49.0,T,39.0,M,0.32,N*0F\\r\\n\",\n  \"NMEA_AS_IS\": {\n    \"VLW\": \"$IIVLW,03013,N,012.2,N*53\\r\",\n    \"VHW\": \"$IIVHW,,,213,M,07.1,N,,*62\\r\",\n    \"VDR\": \"$CCVDR,49.0,T,39.0,M,0.32,N*0F\\r\\n\",\n    \"GLL\": \"$IIGLL,0906.498,S,14012.558,W,220745,A,A*5D\\r\",\n    \"RMB\": \"$IIRMB,A,3.00,R,,RANGI   ,,,,,561.70,230,06.7,V,A*02\\r\",\n    \"RMC\": \"$IIRMC,220747,A,0906.502,S,14012.560,W,06.9,215,211110,10,E,A*00\\r\",\n    \"DPT\": \"$IIDPT,001.3,+0.7,*42\\r\",\n    \"HDG\": \"$IIHDG,211,,,10,E*11\\r\",\n    \"MWV\": \"$CCMWV,230.0,T,018.5,N,A*36\\r\\n\",\n    \"VWR\": \"$IIVWR,109,L,15.8,N,,,,*7B\\r\",\n    \"MTW\": \"$IIMTW,+26.5,C*39\\r\",\n    \"VWT\": \"$CCVWT,130.4,L,18.5,N,9.5,M,34.3,K*53\\r\\n\",\n    \"MWD\": \"$CCMWD,091.0,T,081.0,M,18.5,N,9.5,M*75\\r\\n\"\n  },\n  \"D\": {\n    \"angle\": 10\n  },\n  \"XTE\": {\n    \"distance\": 3\n  },\n  \"AWA\": {\n    \"angle\": -109\n  },\n  \"Depth\": {\n    \"depthInMeters\": 2\n  },\n  \"Bearing to WP\": {\n    \"angle\": 230\n  },\n  \"W\": {\n    \"angle\": 9.01692220976113\n  },\n  \"Speed to WP\": {\n    \"speed\": 6.7\n  },\n  \"COG\": {\n    \"angle\": 215\n  },\n  \"AWS\": {\n    \"speed\": 15.8\n  },\n  \"HDG true\": {\n    \"angle\": 222.01692220976113\n  },\n  \"AWA Offset\": 0,\n  \"CSP\": {\n    \"speed\": 0.8796925520240182\n  },\n  \"d\": {\n    \"angle\": -0.9830777902388692\n  },\n  \"Default Declination\": {\n    \"angle\": 14\n  },\n  \"Deviation file name\": \"dp_2011_04_15.csv\",\n  \"HDG mag.\": {\n    \"angle\": 212.01692220976113\n  },\n  \"SOG\": {\n    \"speed\": 6.9\n  },\n  \"Leeway\": {\n    \"angle\": 0\n  },\n  \"GPS Date & Time\": {\n    \"date\": \"Nov 21, 2010, 2:07:47 PM\",\n    \"epoch\": 1290377267000,\n    \"fmtDate\": {\n      \"epoch\": 1290377267000,\n      \"year\": 2010,\n      \"month\": 11,\n      \"day\": 21,\n      \"hour\": 22,\n      \"min\": 7,\n      \"sec\": 47\n    }\n  },\n  \"WayPoint pos\": {\n    \"lat\": 0,\n    \"lng\": 0\n  },\n  \"VMG to Waypoint\": 6.664888201394572,\n  \"Steer\": \"R\"\n}\n *\n */\nconst boatOverviewVerbose = false;\nconst BOAT_OVERVIEW_TAG_NAME = 'boat-overview';\n\nconst boatOverviewDefaultColorConfig = {\n\tdisplayBackgroundGradient: {\n\t\tfrom: 'silver',\n\t\tto: 'lightgray'\n\t},\n\tgridColor: 'gray',\n\n\ttwArrowColor: 'black',\n\tbspArrowColor: 'red',\n\tcmgArrowColor:'cyan',\n\tawArrowColor: 'blue',\n\tgpsWsArrowColor: 'coral',\n\tvmgArrowColor: 'red',\n\tdDWArrowColor: 'yellow',\n\tcurrentArrowColor: 'royalblue',\n\tboatFillColor: 'silver',\n\tboatOutlineColor: 'blue',\n\n\tnmeaDataDisplayColor: 'royalblue',\n\tcalculatedDataDisplayColor: 'darkcyan',\n\tvmgDataDisplayColor: 'red',\n\tdDWDataDisplayColor: 'yellow',\n\n};\n\nimport * as Utilities from \"../utilities/Utilities.js\";\n\n/* global HTMLElement */\nclass BoatOverview extends HTMLElement {\n\n\tstatic get observedAttributes() { // That's a big one...\n\t\treturn [\n\t\t\t\"width\",        // Integer. Canvas width\n\t\t\t\"height\",       // Integer. Canvas height\n\t\t\t\"bsp\",          // Float. Boat Speed Numeric value, knots\n\t\t\t\"hdg\",          // Integer, True Heading [0..360]\n\t\t\t\"aws\",          // Float. App Wind Speed Numeric value, knots\n\t\t\t\"awa\",          // Integer. App Wind Angle [-180..180] Numeric value\n\t\t\t\"tws\",          // Float. True Wind Speed Numeric value, knots\n\t\t\t\"twa\",          // Integer. True Wind Angle [-180..180] Numeric value\n\t\t\t\"twd\",          // Integer. True Wind Direction [0..360] Numeric value\n\t\t\t\"vmg\",          // Float. Velocity Made Good value, knots\n\t\t\t\"sog\",          // Float. Speed Over Ground Numeric value, knots\n\t\t\t\"cog\",          // Integer. Course Over Ground [0..360] Numeric value\n\t\t\t\"cdr\",          // Integer. Current Direction [0..360] Numeric value\n\t\t\t\"csp\",          // Float. Current Speed Numeric value, knots\n\t\t\t\"lwy\",          // Float. Leeway [-180..180] Numeric value\n\t\t\t\"cmg\",          // Integer. Course Made Good [0..360] Numeric value\n\t\t\t\"b2wp\",         // Integer. Bearing to Next Way Point [0..360] Numeric value\n\t\t\t\"decl\",         // Float. Magnetic Declination Numeric value +/-\n\t\t\t\"dev\",          // Float. Magnetic deviation Numeric value +/-\n\t\t\t\"with-current\", // Boolean. Draw current\n\t\t\t\"with-gps\",    // Boolean. Draw SOG & COG\n\t\t\t\"with-wind\",    // Boolean. Draw wind (app & true)\n\t\t\t\"with-true-wind\", // Boolean. Draw true wind\n\t\t\t\"with-labels\",  // Boolean. Draw Labels on graphic\n\t\t\t\"with-vmg\",     // Boolean. Draw VMG\n\t\t\t\"vmg-on-wind\",  // Boolean. true: on Wind, false: on WayPoint\n\t\t\t\"with-w\",       // Boolean. Draw D & d\n\t\t\t\"boat-shape\",   // String. MONO, CATA, TRI, PLANE\n\t\t\t\"zoom-on-boat\", // Float, enforce zoom in (>1) or out (<1). Default 1\n\t\t\t\"wp-name\"       // String. Next WayPoint name\n\n\t\t];\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._shadowRoot = this.attachShadow({mode: 'open'}); // 'open' means it is accessible from external JavaScript.\n\t\t// create and append a <canvas>\n\t\tthis.canvas = document.createElement(\"canvas\");\n\t\tlet fallbackElemt = document.createElement(\"h1\");\n\t\tlet content = document.createTextNode(\"This is a Boat Overview Web Component, on an HTML5 canvas\");\n\t\tfallbackElemt.appendChild(content);\n\t\tthis.canvas.appendChild(fallbackElemt);\n\t\tthis.shadowRoot.appendChild(this.canvas);\n\n\t\t// Default values\n\t\tthis._width = 600;\n\t\tthis._height = 500;\n\n\t\tthis._bsp = 0; // Boat Speed\n\t\tthis._hdg = 0; // True Heading\n\t\tthis._aws = 0; // App Wind Speed\n\t\tthis._awa = 0; // App Wind Angle\n\t\tthis._tws = 0; // True Wind Speed\n\t\tthis._twa = 0; // True Wind Angle\n\t\tthis._twd = 0; // True Wind Direction\n\t\tthis._vmg = 0; // Velocity Made Good\n\t\tthis._cog = 0; // Course Over Ground\n\t\tthis._sog = 0; // Speed Over Ground\n\t\tthis._cdr = 0; // Current Direction\n\t\tthis._csp = 0; // Current Speed\n\t\tthis._lwy = 0; // Leeway\n\t\tthis._cmg = 0; // Course Made Good\n\t\tthis._b2wp = 0; // Bearing to WP\n\t\tthis._Decl = 0;   // Declination\n\t\tthis._dev = 0;   // deviation\n\n\t\tthis._zoom = 1.0;\n\n\t\tthis._withCurrent = false;\n\t\tthis._withLabels = true\n\t\tthis._withGPS = true;\n\t\tthis._withWind = true;\n\t\tthis._withTrueWind = true;\n\t\tthis._withVMG = true;\n\t\tthis._vmgOnWind = true; // False means vmg on WP\n\t\tthis._withW = false;    // Requires D and d\n\n\t\tthis._boatShape = \"MONO\"; // \"CATA\"; //\"MONO\"; // \"TRI\"; // \"PLANE\";\n\t\tthis._wpName = \"\";\n\n\t\tthis._previousClassName = \"\";\n\t\tthis.boatOverviewColorConfig = boatOverviewDefaultColorConfig;\n\n\t\tthis.speedScale = 10; // Default value\n\n\t\tthis.WL_RATIO_COEFF = 0.75; // Ratio to apply to (3.5 * Width / Length)\n\t\tthis.BOAT_LENGTH = 100; // 50;\n\t}\n\n\t// Called whenever the custom element is inserted into the DOM.\n\tconnectedCallback() {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"connectedCallback invoked.\");\n\t\t}\n\t\tthis.repaint();\n\t}\n\n\t// Called whenever the custom element is removed from the DOM.\n\tdisconnectedCallback() {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"disconnectedCallback invoked\");\n\t\t}\n\t}\n\n\t// Called whenever an attribute is added, removed or updated.\n\t// Only attributes listed in the observedAttributes property are affected.\n\tattributeChangedCallback(attrName, oldVal, newVal) {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"attributeChangedCallback invoked on \" + attrName + \" from \" + oldVal + \" to \" + newVal);\n\t\t}\n\t\tswitch (attrName) {\n\t\t\tcase \"width\":\n\t\t\t\tthis._width = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"height\":\n\t\t\t\tthis._height = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"bsp\":\n\t\t\t\tthis._bsp = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"hdg\":\n\t\t\t\tthis._hdg = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"aws\":\n\t\t\t\tthis._aws = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"awa\":\n\t\t\t\tthis._awa = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"tws\":\n\t\t\t\tthis._tws = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"twa\":\n\t\t\t\tthis._twa = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"twd\":\n\t\t\t\tthis._twd = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"vmg\":\n\t\t\t\tthis._vmg = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"sog\":\n\t\t\t\tthis._sog = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"cog\":\n\t\t\t\tthis._cog = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"cdr\":\n\t\t\t\tthis._cdr = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"csp\":\n\t\t\t\tthis._csp = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"lwy\":\n\t\t\t\tthis._lwy = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"cmg\":\n\t\t\t\tthis._cmg = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"b2wp\":\n\t\t\t\tthis._b2wp = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"decl\":\n\t\t\t\tthis._Decl = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"dev\":\n\t\t\t\tthis._dev = parseFloat(newVal);\n\t\t\t\tbreak;\n\n\t\t\tcase \"zoom-on-boat\":\n\t\t\t\tthis._zoom = parseFloat(newVal);\n\t\t\t\tbreak;\n\n\t\t\tcase \"with-current\":\n\t\t\t\tthis._withCurrent = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-gps\":\n\t\t\t\tthis._withGPS = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-true-wind\":\n\t\t\t\tthis._withTrueWind = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-wind\":\n\t\t\t\tthis._withWind = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-labels\":\n\t\t\t\tthis._withLabels = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-vmg\":\n\t\t\t\tthis._withVMG = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"vmg-on-wind\":\n\t\t\t\tthis._vmgOnWind = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-w\":\n\t\t\t\tthis._withW = (newVal === 'true');\n\t\t\t\tbreak;\n\n\t\t\tcase \"boat-shape\":\n\t\t\t\tconsole.log('BoatShape changing')\n\t\t\t\tif (newVal === 'MONO' || newVal === 'CATA' || newVal === 'TRI' || newVal === 'PLANE') {\n\t\t\t\t\tthis._boatShape = newVal;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"wp-name\":\n\t\t\t\tthis._wpName = newVal;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.repaint();\n\t}\n\n\t// Called whenever the custom element has been moved into a new document.\n\tadoptedCallback() {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"adoptedCallback invoked\");\n\t\t}\n\t}\n\n\t// Setters\n\tset width(val) {\n\t\tthis.setAttribute(\"width\", val);\n\t}\n\n\tset height(val) {\n\t\tthis.setAttribute(\"height\", val);\n\t}\n\n\tset bsp(val) {\n\t\tthis.setAttribute(\"bsp\", val);\n\t}\n\n\tset hdg(val) {\n\t\tthis.setAttribute(\"hdg\", val);\n\t}\n\n\tset aws(val) {\n\t\tthis.setAttribute(\"aws\", val);\n\t}\n\n\tset awa(val) {\n\t\tthis.setAttribute(\"awa\", val);\n\t}\n\n\tset tws(val) {\n\t\tthis.setAttribute(\"tws\", val);\n\t}\n\n\tset twa(val) {\n\t\tthis.setAttribute(\"twa\", val);\n\t}\n\n\tset twd(val) {\n\t\tthis.setAttribute(\"twd\", val);\n\t}\n\n\tset vmg(val) {\n\t\tthis.setAttribute(\"vmg\", val);\n\t}\n\n\tset cog(val) {\n\t\tthis.setAttribute(\"cog\", val);\n\t}\n\n\tset sog(val) {\n\t\tthis.setAttribute(\"sog\", val);\n\t}\n\n\tset cdr(val) {\n\t\tthis.setAttribute(\"cdr\", val);\n\t}\n\n\tset csp(val) {\n\t\tthis.setAttribute(\"csp\", val);\n\t}\n\n\tset lwy(val) {\n\t\tthis.setAttribute(\"lwy\", val);\n\t}\n\n\tset cmg(val) {\n\t\tthis.setAttribute(\"cmg\", val);\n\t}\n\n\tset b2wp(val) {\n\t\tthis.setAttribute(\"b2wp\", val);\n\t}\n\n\tset Decl(val) {\n\t\tthis.setAttribute(\"decl\", val);\n\t}\n\n\tset dev(val) {\n\t\tthis.setAttribute(\"dev\", val);\n\t}\n\n\tset zoomOnBoat(val) {\n\t\tthis.setAttribute(\"zoom-on-boat\", val);\n\t}\n\n\tset withGPS(val) {\n\t\tthis.setAttribute(\"with-gps\", val);\n\t}\n\n\tset withCurrent(val) {\n\t\tthis.setAttribute(\"with-current\", val);\n\t}\n\n\tset withTrueWind(val) {\n\t\tthis.setAttribute(\"with-true-wind\", val);\n\t}\n\n\tset withWind(val) {\n\t\tthis.setAttribute(\"with-wind\", val);\n\t}\n\n\tset withLabels(val) {\n\t\tthis.setAttribute(\"with-labels\", val);\n\t}\n\n\tset withVMG(val) {\n\t\tthis.setAttribute(\"with-vmg\", val);\n\t}\n\n\tset vmgOnWind(val) {\n\t\tthis.setAttribute(\"vmg-on-wind\", val);\n\t}\n\n\tset withW(val) {\n\t\tthis.setAttribute(\"with-w\", val);\n\t}\n\n\tset wpName(val) {\n\t\tthis.setAttribute(\"wp-name\", val);\n\t}\n\n\tset boatShape(val) {\n\t\tthis.setAttribute(\"boat-shape\", val);\n\t}\n\n\tset shadowRoot(val) {\n\t\tthis._shadowRoot = val;\n\t}\n\n\t// Getters\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tget height() {\n\t\treturn this._height;\n\t}\n\n\tget bsp() {\n\t\treturn this._bsp;\n\t}\n\n\tget hdg() {\n\t\treturn this._hdg;\n\t}\n\n\tget aws() {\n\t\treturn this._aws;\n\t}\n\n\tget awa() {\n\t\treturn this._awa;\n\t}\n\n\tget twa() {\n\t\treturn this._twa;\n\t}\n\n\tget tws() {\n\t\treturn this._tws;\n\t}\n\n\tget twd() {\n\t\treturn this._twd;\n\t}\n\n\tget vmg() {\n\t\treturn this._vmg;\n\t}\n\n\tget cog() {\n\t\treturn this._cog;\n\t}\n\n\tget sog() {\n\t\treturn this._sog;\n\t}\n\n\tget cdr() {\n\t\treturn this._cdr;\n\t}\n\n\tget csp() {\n\t\treturn this._csp;\n\t}\n\n\tget lwy() {\n\t\treturn this._lwy;\n\t}\n\n\tget cmg() {\n\t\treturn this._cmg;\n\t}\n\n\tget b2wp() {\n\t\treturn this._b2wp;\n\t}\n\n\tget Decl() {\n\t\treturn this._Decl;\n\t}\n\n\tget dev() {\n\t\treturn this._dev;\n\t}\n\n\tget zoomOnBoat() {\n\t\treturn this._zoom;\n\t}\n\n\tget withGPS() {\n\t\treturn this._withGPS;\n\t}\n\n\tget withCurrent() {\n\t\treturn this._withCurrent;\n\t}\n\n\tget withTrueWind() {\n\t\treturn this._withTrueWind;\n\t}\n\n\tget withWind() {\n\t\treturn this._withWind;\n\t}\n\n\tget withLabels() {\n\t\treturn this._withLabels;\n\t}\n\n\tget withVMG() {\n\t\treturn this._withVMG;\n\t}\n\n\tget vmgOnWind() {\n\t\treturn this._vmgOnWind;\n\t}\n\n\tget withW() {\n\t\treturn this._withW;\n\t}\n\n\tget wpName() {\n\t\treturn this._wpName;\n\t}\n\n\tget boatShape() {\n\t\treturn this._boatShape;\n\t}\n\n\tget shadowRoot() {\n\t\treturn this._shadowRoot;\n\t}\n\n\t// Component methods\n\tgetColorConfig(classNames) {\n\t\tlet colorConfig = boatOverviewDefaultColorConfig;\n\t\tlet classes = classNames.split(\" \");\n\t\tfor (let cls = 0; cls < classes.length; cls++) {\n\t\t\tlet cssClassName = classes[cls];\n\t\t\tfor (let s = 0; s < document.styleSheets.length; s++) {\n\t\t\t\t// console.log(\"Walking though \", document.styleSheets[s]);\n\t\t\t\ttry {\n\t\t\t\t\tfor (let r = 0; document.styleSheets[s].cssRules !== null && r < document.styleSheets[s].cssRules.length; r++) {\n\t\t\t\t\t\tlet selector = document.styleSheets[s].cssRules[r].selectorText;\n\t\t\t\t\t\t//\t\t\tconsole.log(\">>> \", selector);\n\t\t\t\t\t\tif (selector !== undefined && (selector === '.' + cssClassName || (selector.indexOf('.' + cssClassName) > -1 && selector.indexOf(BOAT_OVERVIEW_TAG_NAME) > -1))) { // Cases like \"tag-name .className\"\n\t\t\t\t\t\t\t//\t\t\t\tconsole.log(\"  >>> Found it! [%s]\", selector);\n\t\t\t\t\t\t\tlet cssText = document.styleSheets[s].cssRules[r].style.cssText;\n\t\t\t\t\t\t\tlet cssTextElems = cssText.split(\";\");\n\t\t\t\t\t\t\tcssTextElems.forEach(function (elem) {\n\t\t\t\t\t\t\t\tif (elem.trim().length > 0) {\n\t\t\t\t\t\t\t\t\tlet keyValPair = elem.split(\":\");\n\t\t\t\t\t\t\t\t\tlet key = keyValPair[0].trim();\n\t\t\t\t\t\t\t\t\tlet value = keyValPair[1].trim();\n\t\t\t\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\t\t\t\tcase '--display-background-gradient-from':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.displayBackgroundGradient.from = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--display-background-gradient-to':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.displayBackgroundGradient.to = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--grid-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.gridColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--tw-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.twArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--bsp-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.bspArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--cmg-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.cmgArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--aw-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.awArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--gps-ws-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.gpsWsArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--vmg-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.vmgArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--variation-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.dDWArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--current-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.currentArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--boat-fill-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.boatFillColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--boat-outline-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.boatOutlineColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--nmea-display-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.nmeaDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--calculated-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.calculatedDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--variation-display-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.dDWDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--vmg-display-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.vmgDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Absorb\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn colorConfig;\n\t}\n\n\trepaint() {\n\t\tthis.drawBoatOverview();\n\t}\n\n\tgetCanvasCenter() {\n\t\tlet cw = this._width;\n\t\tlet ch = this._height;\n\t\tlet distFromRight = Math.min(cw, ch) / 2;\n\n\t\treturn { x: cw - distFromRight, y: ch / 2};\n\t}\n\n\tdrawTrueWind(context) {\n\t\tlet cWidth  = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet _twd = Utilities.toRadians(this._twd);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet windLength = this._zoom * this._tws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = windLength * Math.sin(_twd);\n\t\tlet dY = - windLength * Math.cos(_twd);\n\t\t// create a new line object\n\t\tlet line = new Line(x + dX, y + dY, x, y);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.twArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.twArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithAnemoArrowheads(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.twArrowColor;\n\t\t\tcontext.fillText(\"TWS:\" + this._tws.toFixed(2) + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"TWA:\" + this._twa + \"°\", x + dX, y + dY + 14);\n\t\t}\n\t}\n\n\tdrawAppWind(context) {\n\t\tlet cWidth  = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet wd = this._hdg + this._awa; // Direction the wind is blowing TO\n\t\twhile (wd > 360) {\n\t\t\twd -= 360;\n\t\t}\n\t\tlet _awd = Utilities.toRadians(wd);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet windLength = this._zoom * this._aws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = windLength * Math.sin(_awd);\n\t\tlet dY = - windLength * Math.cos(_awd);\n\t\t// create a new line object\n\t\tlet line = new Line(x + dX, y + dY, x, y);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.awArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.awArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithAnemoArrowheads(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.awArrowColor;\n\t\t\tcontext.fillText(\"AWS:\" + this._aws + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"AWA:\" + this._awa + \"°\", x + dX, y + dY + 14);\n\t\t}\n\t}\n\n\tdrawBSP(context) {\n\t\tif (this._bsp === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet _hdg = Utilities.toRadians(this._hdg);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this._bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.bspArrowColor;\n\t\tcontext.lineWidth = 3;\n\t\tline.drawHollowArrow(context);\n\t\tcontext.closePath();\n//    let metrics = context.measureText(valueToDisplay);\n//    len = metrics.width;\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.bspArrowColor;\n\t\t\tcontext.fillText(\"BSP:\" + this._bsp.toFixed(2) + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"HDG:\" + this._hdg.toFixed(0) + \"°\", x + dX, y + dY + 14);\n\t\t}\n\t}\n\n\tdrawCMG(context) {\n\t\tif (this._bsp === 0 || this._lwy === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet _hdg = Utilities.toRadians(this._cmg);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this._bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.cmgArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.cmgArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.calculatedDataDisplayColor;\n\t\t\tcontext.fillText(\"CMG:\" + this._cmg.toFixed(0) + \"°\", x + dX, y + dY);\n\t\t}\n\t}\n\n\tdrawNorths(context) {\n\t\tif (this._bsp === 0 || (this._Decl === 0 && this._dev === 0)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this._width;\n\t\tlet cHeight = this._height;\n\t\t// Warning: Represent the Norths, not the headings!!!\n\t\tlet magNorth = this._Decl;\n\t\tlet compassNorth = magNorth + this._dev;\n\n\t\twhile (magNorth < 0) {\n\t\t\tmagNorth += 360;\n\t\t}\n\t\twhile (compassNorth < 0) {\n\t\t\tcompassNorth += 360;\n\t\t}\n\n\t\tlet _magNorth = Utilities.toRadians(magNorth);\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this._bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\t// True North first\n\t\tlet line = new Line(x, y, x, y - (bspLength * 1.1));\n\t\tcontext.beginPath();\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.lineWidth = 1;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.dDWDataDisplayColor;\n\t\t\tcontext.fillText(\"N\", x, y  - (bspLength * 1.1));\n\t\t}\n\n\t\tcontext.beginPath();\n\t\tlet dX = bspLength * Math.sin(_magNorth);\n\t\tlet dY = - bspLength * Math.cos(_magNorth);\n\t\t// create a new line object\n\t\tline = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.dDWDataDisplayColor;\n\t\t\tcontext.fillText(\"Mag N:\" + magNorth.toFixed(0) + \"°\", x + dX, y + dY);\n\t\t}\n\t\tlet _compassNorth = Utilities.toRadians(compassNorth);\n\t\tcontext.beginPath();\n\n\t\tdX = bspLength * 0.8 * Math.sin(_compassNorth);\n\t\tdY = - bspLength * 0.8 * Math.cos(_compassNorth);\n\t\t// create a new line object\n\t\tline = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.dDWDataDisplayColor;\n\t\t\tcontext.fillText(\"Compass N:\" + compassNorth.toFixed(0) + \"°\", x + dX, y + dY);\n\t\t}\n\t}\n\tdrawSOG(context) {\n\t\tif (this._sog === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet _hdg = Utilities.toRadians(this._cog);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this._sog * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\t\tcontext.fillText(\"SOG:\" + this._sog + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"COG:\" + this._cog + \"°\", x + dX, y + dY + 14);\n\t\t\tcontext.lineWidth = 1;\n\t\t}\n\t}\n\n\tdrawVMG(context) {\n\t\tlet cWidth = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet _hdg = 0;\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tif (this.vmgOnWind) {\n\t\t\t_hdg = Utilities.toRadians(this._twd);\n\t\t} else {\n\t\t\t_hdg = Utilities.toRadians(this._b2wp);\n\t\t\t// Display WP direction\n\t\t\tcontext.strokeStyle = this.boatOverviewColorConfig.vmgArrowColor;\n\t\t\tcontext.fillStyle   = this.boatOverviewColorConfig.vmgArrowColor;\n\t\t\tcontext.lineWidth = 1;\n\t\t\tlet len = 0.75 * Math.min(cHeight, cWidth) / 2;\n\t\t\tlet _dX = len * Math.sin(_hdg);\n\t\t\tlet _dY = - len * Math.cos(_hdg);\n\t\t\tlet wpLine = new Line(x, y, x + _dX, y + _dY);\n\t\t\twpLine.drawWithArrowhead(context);\n\t\t\tcontext.fillText(this._wpName, x + _dX, y + _dY);\n\t\t}\n\n\t\tlet bspLength = this._zoom * this._vmg * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.vmgArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.vmgArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.save();\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.vmgArrowColor;\n\t\t\tcontext.fillText(\"VMG:\" + this._vmg.toFixed(2) + \" kts\", x + dX, y + dY);\n\t\t\tcontext.restore();\n\t\t}\n\t\tif (context.setLineDash !== undefined) {\n\t\t\tcontext.setLineDash([5]);\n\t\t\tcontext.moveTo(x + dX, y + dY);\n\t\t\tlet _cog = Utilities.toRadians(this._cog);\n\t\t\tlet sogLength = this._zoom * this._sog * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\t\tdX = sogLength * Math.sin(_cog);\n\t\t\tdY = - sogLength * Math.cos(_cog);\n\t\t\tcontext.lineTo(x + dX, y + dY);\n\t\t\tcontext.lineWidth = 1;\n\t\t\tcontext.stroke();\n\t\t\t// Reset\n\t\t\tcontext.setLineDash([]);\n\t\t}\n\t}\n\n\tdrawCurrent(context) {\n\t\tif (this._csp === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet _cmg = Utilities.toRadians(this._cmg);\n\t\tlet bspLength = this._zoom * this._bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXcmg = bspLength * Math.sin(_cmg);\n\t\tlet dYcmg = - bspLength * Math.cos(_cmg);\n\n\t\tlet _cog = Utilities.toRadians(this._cog);\n\t\tlet sogLength = this._zoom * this._sog * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXcog = sogLength * Math.sin(_cog);\n\t\tlet dYcog = - sogLength * Math.cos(_cog);\n\n\t\tcontext.beginPath();\n\t\t// create a new line object\n\t\tlet line = new Line(x + dXcmg, y + dYcmg, x + dXcog, y + dYcog);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.currentArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.currentArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.currentArrowColor;\n\t\t\tcontext.fillText(\"CSP:\" + this._csp.toFixed(2) + \" kts\", x + dXcog, y + dYcog + 28); // + 14 not to overlap the SOG/COG\n\t\t\tcontext.fillText(\"CDR:\" + this._cdr.toFixed(0) + \"°\", x + dXcog, y + dYcog + 42);\n\t\t}\n\t}\n\n\tdrawVW(context) { // Velocity Wind\n\t\tif (this._sog === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth = this._width;\n\t\tlet cHeight = this._height;\n\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet wd = this._hdg + this._awa; // Direction the wind is blowing TO\n\t\twhile (wd > 360) {\n\t\t\twd -= 360;\n\t\t}\n\t\tlet _awd = Utilities.toRadians(wd);\n\t\tcontext.beginPath();\n\t\tlet awLength = this._zoom * this._aws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXaw = awLength * Math.sin(_awd);\n\t\tlet dYaw = - awLength * Math.cos(_awd);\n\n\t\tlet _twd = Utilities.toRadians(this._twd);\n\t\tlet twLength = this._zoom * this._tws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXtw = twLength * Math.sin(_twd);\n\t\tlet dYtw = - twLength * Math.cos(_twd);\n\n\t\tcontext.beginPath();\n\t\t// create a new line object\n\t\tlet line = new Line(x + dXaw, y + dYaw, x + dXtw, y + dYtw);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithAnemoArrowheads(context);\n\t\tcontext.closePath();\n\t}\n\n\tdrawBoat(context, trueHeading) {\n\t\tlet x = [];\n\t\tlet y = [];// Half, length\n\n\t\tlet boatLength = this.BOAT_LENGTH * this._zoom;\n\n\t\tif (this._boatShape === 'MONO') {\n\t\t\t// Width\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Bow\n\t\t\t//     Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (   1 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.5 * boatLength) / 7); // Transom, starboard\n\t\t\t//     Port\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.5 * boatLength) / 7); // Transom, port\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -1 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-4 * boatLength) / 7); // Bow\n\t\t\t//      Starboard\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push( (1 * boatLength) / 7);\n\t\t\ty.push( (3 * boatLength) / 7);\n\t\t\t//     Port\n\t\t\ty.push( (3 * boatLength) / 7);\n\t\t\ty.push( (1 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-3 * boatLength) / 7);\n\n\t\t} else if (this._boatShape === 'CATA') {\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Arm, front, center\n\t\t\t// Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (   1 * boatLength) / 7); // Arm starboard, hull side\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.5 * boatLength) / 7); // Starboard bow\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.8 * boatLength) / 7); // Starboard transform, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.2 * boatLength) / 7); // Starboard transform, int\n\t\t\tx.push(this.WL_RATIO_COEFF * (   1 * boatLength) / 7); // Arm, back, starboard, hull side\n\t\t\tx.push(this.WL_RATIO_COEFF * (   0 * boatLength) / 7); // Arm, back, starboard, center\n\t\t\t// Port\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -0 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -1 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.8 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.5 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -1 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\t//   Starboard\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-4 * boatLength) / 7); // Bow\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((0 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\t//    Port\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7); // Bow\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((0 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-4 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\n\t\t} else if (this._boatShape === 'TRI') {\n\t\t\t// Width\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Bow, center hull\n\t\t\t// Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Arm, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.6 * boatLength) / 7); // Arm, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.8 * boatLength) / 7); // Outrigger bow\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.9 * boatLength) / 7); // Outrigger transom, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.7 * boatLength) / 7); // Outrigger transom, int\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.6 * boatLength) / 7); // Arm, back, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Arm, back, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7); // Main hull, transom starboard,\n\t\t\t// Port\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.6 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.7 * boatLength) / 7); // Outrigger transom, int\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.9 * boatLength) / 7); // Outrigger transom, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.8 * boatLength) / 7); // Outrigger bow\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.6 * boatLength) / 7); // Arm, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7); // Arm, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-4 * boatLength) / 7); // Bow\n\t\t\t// Starboard\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7); // Starboard arm, front\n\t\t\ty.push((-1 * boatLength) / 7); // Starboard arm, front, outrigger\n\t\t\ty.push((-2.6 * boatLength) / 7); // Starboard outrigger bow\n\t\t\ty.push((-1.5 * boatLength) / 7);\n\t\t\ty.push(( 1.5 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7); // Starboard transom, ext\n\t\t\ty.push(( 2.5 * boatLength) / 7); // Starboard transom, ext\n\t\t\ty.push(( 1 * boatLength) / 7); // Starboard arm, back, outrigger\n\t\t\ty.push(( 1 * boatLength) / 7); // Starboard arm, hull\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\t// Port\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\ty.push(( 1 * boatLength) / 7);\n\t\t\ty.push(( 1 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 1.5 * boatLength) / 7);\n\t\t\ty.push((-1.5 * boatLength) / 7);\n\t\t\ty.push((-2.6 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t} else if (this._boatShape === 'PLANE') {\n\t\t\t// Width\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Nose\n\t\t\t// Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Wing, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  4 * boatLength) / 7); // Wing, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  4 * boatLength) / 7); // Wing, outside, back\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Wing, back, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7); // Main hull, transom starboard,\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7); // Main hull, back wing, front\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7); // Main hull, back wing, back, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.1 * boatLength) / 7); // Main hull, back wing, back, int\n\t\t\t// Port\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.1 * boatLength) / 7); // Main hull, back wing, back, int\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7); // Main hull, back wing, back, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7); // Main hull, back wing, front\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7); // Main hull, transom starboard,\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7); // Wing, back, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -4 * boatLength) / 7); // Outrigger bow\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -4 * boatLength) / 7); // Arm, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7); // Arm, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-4 * boatLength) / 7); // Nose\n\t\t\t// Starboard\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t\ty.push((-2 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push(( 0 * boatLength) / 7);\n\t\t\ty.push((-0.5 * boatLength) / 7);\n\t\t\ty.push(( 1.8 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\ty.push(( 2.8 * boatLength) / 7);\n\t\t\t// Port\n\t\t\ty.push(( 2.8 * boatLength) / 7);\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 1.8 * boatLength) / 7);\n\t\t\ty.push((-0.5 * boatLength) / 7);\n\t\t\ty.push(( 0 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-2 * boatLength) / 7);\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t}\n\t\tlet xPoints = [];\n\t\tlet yPoints = [];\n\n\t\t// Rotation matrix:\n\t\t// | cos(alpha)  -sin(alpha) |\n\t\t// | sin(alpha)   cos(alpha) |\n\t\t// The center happens to be the middle of the boat.\n\n\t\tlet center = this.getCanvasCenter();\n\t\tlet ptX = center.x;\n\t\tlet ptY = center.y;\n\n\t\tfor (let i=0; i<x.length; i++) { // Rotation\n\t\t\tlet dx = x[i] * Math.cos(Utilities.toRadians(trueHeading)) + (y[i] * (-Math.sin(Utilities.toRadians(trueHeading))));\n\t\t\tlet dy = x[i] * Math.sin(Utilities.toRadians(trueHeading)) + (y[i] *   Math.cos(Utilities.toRadians(trueHeading)));\n\t\t\txPoints.push(Math.round(ptX + dx));\n\t\t\tyPoints.push(Math.round(ptY + dy));\n\t\t}\n\t\tcontext.fillStyle = this.boatOverviewColorConfig.boatFillColor;\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(xPoints[0], yPoints[0]);\n\t\tfor (let i=1; i<xPoints.length; i++) {\n\t\t\tcontext.lineTo(xPoints[i], yPoints[i]);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.fill();\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.boatOutlineColor;\n\t\tcontext.lineWidth = 2;\n\t\tcontext.stroke();\n\t}\n\n\tdrawBoatOverview() {\n\n\t\tlet currentStyle = this.className;\n\t\tif (this._previousClassName !== currentStyle || true) {\n\t\t\t// Reload\n\t\t\t//\tconsole.log(\"Reloading CSS\");\n\t\t\ttry {\n\t\t\t\tthis.boatOverviewColorConfig = this.getColorConfig(currentStyle);\n\t\t\t} catch (err) {\n\t\t\t\t// Absorb?\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t\tthis._previousClassName = currentStyle;\n\t\t}\n\n\t\tlet context = this.canvas.getContext('2d');\n\n\t\tif (this._width === 0 || this._height === 0) { // Not visible\n\t\t\treturn;\n\t\t}\n\t\t// Set the canvas size from its container.\n\t\tthis.canvas.width = this._width;\n\t\tthis.canvas.height = this._height;\n\n\t\t// Background\n\t\tlet grd = context.createLinearGradient(0, 5, 0, this._height);\n\t\tgrd.addColorStop(0, this.boatOverviewColorConfig.displayBackgroundGradient.from); // 0  Beginning\n\t\tgrd.addColorStop(1, this.boatOverviewColorConfig.displayBackgroundGradient.to); // 1  End\n\t\tcontext.fillStyle = grd;\n\t\tcontext.fillRect(0, 0, this._width, this._height);\n\n\t\t// The actual Graph:\n\t\tlet maxSpeed = 5;\n\t\tif (this._withGPS) {\n\t\t\tmaxSpeed = Math.max(maxSpeed, this._sog);\n\t\t}\n\t\tmaxSpeed = Math.max(maxSpeed, this._bsp);\n\t\tif (this._withGPS && this._withWind && this._withTrueWind) {\n\t\t\tmaxSpeed = Math.max(maxSpeed, this._tws);\n\t\t}\n\t\tif (this._withWind) {\n\t\t\tmaxSpeed = Math.max(maxSpeed, this._aws);\n\t\t}\n\t\tthis.speedScale = 5 * (Math.ceil(maxSpeed / 5));\n\n\t\tlet cWidth  = this._width;\n\t\tlet cHeight = this._height;\n\n\t\t// Circles\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.gridColor;\n\t\tfor (let circ=1; circ<=this.speedScale; circ++) {\n\t\t\tlet radius = this._zoom * Math.round(circ * ((Math.min(cHeight, cWidth) / 2) / this.speedScale));\n\t\t\tcontext.beginPath();\n\t\t\tif (circ % 5 == 0) {\n\t\t\t\tcontext.lineWidth = 3;\n\t\t\t} else {\n\t\t\t\tcontext.lineWidth = 1;\n\t\t\t}\n\t\t\tcontext.arc(x, y, radius, 0, 2 * Math.PI);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tthis.drawBoat(context, this._hdg);\n\t\tif (this._withWind && this._withTrueWind) {\n\t\t\tif (this._withGPS) {\n\t\t\t\tthis.drawTrueWind(context);\n\t\t\t\tthis.drawVW(context); // Speed Wind (Velocity)\n\t\t\t}\n\t\t}\n\t\tif (this._withWind) {\n\t\t\tthis.drawAppWind(context);\n\t\t}\n\t\tthis.drawBSP(context);\n\t\tif (this._withW) {\n\t\t\tthis.drawNorths(context);\n\t\t}\n\t\tthis.drawCMG(context);\n\t\tif (this._withGPS) {\n\t\t\tthis.drawSOG(context);\n\t\t}\n\t\tif (this._withCurrent && this._withGPS) {\n\t\t\tthis.drawCurrent(context);\n\t\t}\n\t\tif (this._withVMG && this._withGPS) {\n\t\t\tthis.drawVMG(context);\n\t\t}\n\t\t// Display values\n\t\t// See http://www.w3schools.com/tags/ref_entities.asp, &deg; = &#176;\n\t\tcontext.fillStyle = this.boatOverviewColorConfig.nmeaDataDisplayColor;\n\t\tcontext.font=\"bold 16px Courier New\";\n\t\tlet txtY = 20;\n\t\tvar space = 18;\n\t\tlet col1 = 10, col2 = 90;\n\t\tcontext.fillText(\"BSP\", col1, txtY);\n\t\tcontext.fillText(this._bsp + \" kts\", col2, txtY);\n\t\ttxtY += space;\n\t\tcontext.fillText(\"HDG\", col1, txtY);\n\t\tcontext.fillText(this._hdg.toFixed(0) + \"° True\", col2, txtY);\n\t\tif (this._withWind) {\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"AWS\", col1, txtY);\n\t\t\tcontext.fillText(this._aws + \" kts\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"AWA\", col1, txtY);\n\t\t\tcontext.fillText(this._awa + \"°\", col2, txtY);\n\t\t}\n\n\t\tif (this._withGPS) {\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"COG\", col1, txtY);\n\t\t\tcontext.fillText(this._cog.toFixed(0) + \"°\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"SOG\", col1, txtY);\n\t\t\tcontext.fillText(this._sog.toFixed(2) + \" kts\", col2, txtY);\n\t\t}\n\n\t\tcontext.fillStyle = this.boatOverviewColorConfig.calculatedDataDisplayColor;\n\t\tif (this._withWind && this._withTrueWind && this._withGPS) {\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"TWS\", col1, txtY);\n\t\t\tcontext.fillText(this._tws.toFixed(2) + \" kts\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"TWA\", col1, txtY);\n\t\t\tcontext.fillText(this._twa + \"°\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"TWD\", col1, txtY);\n\t\t\tcontext.fillText(this._twd + \"°\", col2, txtY);\n\t\t}\n\t\tif (this._withCurrent && this._withGPS) {\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"CDR\", col1, txtY);\n\t\t\tcontext.fillText(this._cdr.toFixed(0) + \"°\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"CSP\", col1, txtY);\n\t\t\tcontext.fillText(this._csp.toFixed(2) + \" kts\", col2, txtY);\n\t\t}\n\t\ttxtY += space;\n\t\tcontext.fillText(\"leeway\", col1, txtY);\n\t\tcontext.fillText(this._lwy.toFixed(2) + \"°\", col2, txtY);\n\t\ttxtY += space;\n\t\tcontext.fillText(\"CMG\", col1, txtY);\n\t\tcontext.fillText(this._cmg.toFixed(0) + \"°\", col2, txtY);\n\n\t\tif (this._withVMG && this._withGPS) {\n\t\t\tlet mess = \", \";\n\t\t\tif (this._vmgOnWind) {\n\t\t\t\tmess += \"on wind\";\n\t\t\t} else {\n\t\t\t\tmess += (\"on WP [\" + this._wpName + \"]\");\n\t\t\t}\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.vmgDataDisplayColor;\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"VMG\", col1, txtY);\n\t\t\tcontext.fillText(this._vmg.toFixed(2) + \" kts\" + mess, col2, txtY);\n\t\t}\n\n\t\tif (this._withW) {\n\t\t\tlet hdm = this._hdg - this._Decl;\n\t\t\tlet hdc = hdm - this._dev;\n\t\t\twhile (hdm < 0) {\n\t\t\t\thdm += 360;\n\t\t\t}\n\t\t\twhile (hdc < 0) {\n\t\t\t\thdc += 360;\n\t\t\t}\n\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.dDWDataDisplayColor;\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"D\", col1, txtY);\n\t\t\tcontext.fillText(this._Decl.toFixed(1) + \"°\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"d\", col1, txtY);\n\t\t\tcontext.fillText(this._dev.toFixed(1) + \"°\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"W\", col1, txtY);\n\t\t\tcontext.fillText((this._Decl + this._dev).toFixed(1) + \"°\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"HDM\", col1, txtY);\n\t\t\tcontext.fillText(hdm.toFixed(1) + \"°\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"HDC\", col1, txtY);\n\t\t\tcontext.fillText(hdc.toFixed(1) + \"°\", col2, txtY);\n\t\t}\n\n\t}\n}\n\nclass Point {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n\n\nclass Line {\n\n// Line with arrow head\n\tconstructor(x1, y1, x2, y2) {\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x2;\n\t\tthis.y2 = y2;\n\n\t\tthis.HEAD_LENGTH = 20;\n\t\tthis.HEAD_WIDTH  =  6;\n\t}\n\n\n\trotate(p, angle) {\n\t\tlet r = new Point(Math.round((p.x * Math.cos(Utilities.toRadians(angle))) + (p.y * Math.sin(Utilities.toRadians(angle)))),\n\t\t\t\tMath.round((p.x * -Math.sin(Utilities.toRadians(angle))) + (p.y * Math.cos(Utilities.toRadians(angle)))));\n\t\treturn r;\n\t}\n\n\tdrawWithArrowhead(ctx) {\n\t\tthis.drawWithArrowheads(ctx, false);\n\t}\n\n\tdrawWithArrowheads(ctx, both) {\n\t\tif (both === undefined) {\n\t\t\tboth = true;\n\t\t}\n\t\t// draw the line\n\t\tctx.beginPath();\n\t\tctx.moveTo(this.x1, this.y1);\n\t\tctx.lineTo(this.x2, this.y2);\n\t\tctx.stroke();\n\n\t\tif (both) {\n\t\t\t// draw the starting arrowhead\n\t\t\tlet startRadians = Math.atan((this.y2 - this.y1) / (this.x2 - this.x1));\n\t\t\tstartRadians += ((this.x2 > this.x1) ? -90 : 90) * Math.PI / 180;\n\t\t\tthis.drawArrowhead(ctx, this.x1, this.y1, startRadians);\n\t\t}\n\t\t// draw the ending arrowhead\n\t\tlet endRadians = Math.atan((this.y2 - this.y1) / (this.x2 - this.x1));\n\t\tendRadians += ((this.x2 > this.x1) ? 90 : -90) * Math.PI / 180;\n\t\tthis.drawArrowhead(ctx, this.x2, this.y2, endRadians);\n\t}\n\n\tdrawWithAnemoArrowheads(ctx) {\n\t\t// draw the line\n\t\tctx.beginPath();\n\t\tctx.moveTo(this.x1, this.y1);\n\t\tctx.lineTo(this.x2, this.y2);\n\t\tctx.stroke();\n\n\t\tlet endRadians = Math.atan((this.y2 - this.y1) / (this.x2 - this.x1));\n\t\tendRadians += ((this.x2 > this.x1) ? 90 : -90) * Math.PI / 180;\n\t\tthis.drawArrowhead(ctx, this.x2 - (this.x2 - this.x1) / 2, this.y2 - (this.y2 - this.y1) / 2, endRadians);\n\t}\n\n\tdrawHollowArrow(ctx) {\n\t\tlet headLength = 30;\n\t\tlet arrowWidth = 10;\n\t\tlet headWidth = 20;\n\n\t\tlet dir = Utilities.getDir((this.x1 - this.x2), (this.y2 - this.y1));\n\t\tlet len = Math.sqrt(((this.x1 - this.x2) * (this.x1 - this.x2)) + ((this.y2 - this.y1) * (this.y2 - this.y1)));\n\n\t\tlet one, two, three, four, five, six, seven, eight;\n\t\tone = new Point(0, 0);\n\t\ttwo = new Point(-arrowWidth / 2, 0);\n\t\tthree = new Point(-arrowWidth / 2, -(Math.round(len - headLength)));\n\t\tfour = new Point(-headWidth / 2, -(Math.round(len - headLength)));\n\t\tfive = new Point(0, -Math.round(len)); // to\n\t\tsix = new Point(headWidth / 2, -(Math.round(len - headLength)));\n\t\tseven = new Point(arrowWidth / 2, -(Math.round(len - headLength)));\n\t\teight = new Point(arrowWidth / 2, 0);\n\t\tone = this.rotate(one, -dir);\n\t\ttwo = this.rotate(two, -dir);\n\t\tthree = this.rotate(three, -dir);\n\t\tfour = this.rotate(four, -dir);\n\t\tfive = this.rotate(five, -dir);\n\t\tsix = this.rotate(six, -dir);\n\t\tseven = this.rotate(seven, -dir);\n\t\teight = this.rotate(eight, -dir);\n\n\t\tlet x = [];\n\t\tlet y = [];\n\n\t\tx.push(this.x1 + one.x);\n\t\tx.push(this.x1 + two.x);\n\t\tx.push(this.x1 + three.x);\n\t\tx.push(this.x1 + four.x);\n\t\tx.push(this.x1 + five.x);\n\t\tx.push(this.x1 + six.x);\n\t\tx.push(this.x1 + seven.x);\n\t\tx.push(this.x1 + eight.x);\n\n\t\ty.push(this.y1 + one.y);\n\t\ty.push(this.y1 + two.y);\n\t\ty.push(this.y1 + three.y);\n\t\ty.push(this.y1 + four.y);\n\t\ty.push(this.y1 + five.y);\n\t\ty.push(this.y1 + six.y);\n\t\ty.push(this.y1 + seven.y);\n\t\ty.push(this.y1 + eight.y);\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(x[0], y[0]);\n\t\tfor (let i = 1; i < x.length; i++) {\n\t\t\tctx.lineTo(x[i], y[i]);\n\t\t}\n\t\tctx.closePath();\n\t\tctx.stroke();\n\t}\n\n\tdrawArrowhead(ctx, x, y, radians) {\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(radians);\n\t\tctx.moveTo(0, 0);\n\t\tctx.lineTo(this.HEAD_WIDTH, this.HEAD_LENGTH);\n\t\tctx.lineTo(-this.HEAD_WIDTH, this.HEAD_LENGTH);\n\t\tctx.closePath();\n\t\tctx.restore();\n\t\tctx.fill();\n\t}\n}\n\n// Associate the tag and the class\nwindow.customElements.define(BOAT_OVERVIEW_TAG_NAME, BoatOverview);\n"],"sourceRoot":""}